# 天线模式地址计算逻辑总结

## 核心计算公式

天线模式的地址计算基于以下公式：

```
天线起始地址 = 4340 + (15 × 31) × (fre - 1) + 15 × (tem - 1) + 1
```

## 公式解析

| 组成部分 | 含义 | 说明 |
|---------|------|------|
| 4340 | 天线地址基地址 | 固定偏移量，区分不同类型的地址 |
| (15 × 31) × (fre - 1) | 频率偏移 | 15=每个温度点的地址数量，31=温度点数量 |
| 15 × (tem - 1) | 温度偏移 | 基于当前温度索引的偏移 |
| + 1 | 地址修正 | 确保地址从1开始而非0 |

## 关键参数

| 参数 | 含义 | 取值范围 |
|------|------|----------|
| fre | 频率索引 | 1-4（对应3330/3350/3370/3390MHz） |
| tem | 温度索引 | 1,2,4,6,8,...（基于温度区间） |
| 15 | 每个温度点的地址数量 | 固定值，天线地址数组长度 |

## 地址生成过程

1. **计算起始地址**：根据当前频率和温度索引计算起始地址
2. **生成地址数组**：从起始地址开始，生成15个连续的地址
3. **格式转换**：将十进制地址转换为十六进制字符串格式（如"0x1105"）
4. **更新控件**：将计算出的地址更新到对应的控件上

## 与其他地址的区别

| 地址类型 | 基地址 | 数量 | 特点 |
|---------|--------|------|------|
| 天线地址 | 4340 | 15 | 用于天线相关参数 |
| 通道地址 | 2480 | 15 | 用于通道相关参数 |
| 正常地址 | 1 | 20 | 用于通用参数 |
| DB36地址 | 33480 | 20 | 用于DB36相关参数 |

## 实际应用

### 地址计算示例

| 频率索引 | 温度索引 | 起始地址 | 地址范围 |
|---------|---------|----------|----------|
| 1 | 1 | 4341 | 4341-4355 |
| 1 | 2 | 4356 | 4356-4370 |
| 2 | 1 | 4806 | 4806-4820 |
| 3 | 1 | 5271 | 5271-5285 |
| 4 | 1 | 5736 | 5736-5750 |

### 温度区间对应关系

| 温度区间 | 下拉框索引 | tem值 |
|---------|----------|-------|
| T<=-50 | 0 | 1 |
| -50<T<=-40 | 1 | 2 |
| -40<T<=-30 | 2 | 4 |
| -30<T<=-20 | 3 | 6 |
| 以此类推... | ... | ... |

## 设计意图

1. **分层管理**：通过频率和温度索引实现二维寻址
2. **空间隔离**：不同类型的地址使用不同的基地址
3. **扩展性**：公式设计便于后续添加新的频率点或温度区间
4. **一致性**：与其他类型地址使用相同的计算模式
5. **完整性**：每个温度点固定15个地址，确保覆盖所有必要的天线参数

这种设计确保了在不同工作条件下，系统能够准确访问对应的天线校准数据，为设备的正常运行提供了可靠的地址管理机制。